<clr-stack-view>
    
    <clr-stack-header>
        Группировка по полю installMethod
        <button
            class="stack-action btn btn-sm btn-link"
            (click)="editModal = true"
            type="button">Edit</button>
    </clr-stack-header>

    <clr-stack-block [clrStackViewLevel]="1" [clrStackViewSetsize]="4" [clrStackViewPosinset]="1" *ngFor="let config of configs">
      
            <clr-stack-label *ngIf="config.installMethod == 'Replace'">{{config.configName}}</clr-stack-label>
            <clr-stack-content><b>installMethod:</b> {{config.installMethod}} <b>Date:</b> {{config.date | date: 'medium'}} </clr-stack-content>
            
            <clr-stack-block [clrStackViewLevel]="2" [clrStackViewSetsize]="3" [clrStackViewPosinset]="1">
                <clr-stack-label>Name</clr-stack-label>
                <clr-stack-content>{{config.configName}}</clr-stack-content>
            </clr-stack-block>
            <clr-stack-block [clrStackViewLevel]="2" [clrStackViewSetsize]="3" [clrStackViewPosinset]="2">
                <clr-stack-label>Date</clr-stack-label>
                <clr-stack-content>{{config.date | date: 'medium'}}</clr-stack-content>
            </clr-stack-block>
            <clr-stack-block [clrStackViewLevel]="2" [clrStackViewSetsize]="3" [clrStackViewPosinset]="3">
                <clr-stack-label>Config status</clr-stack-label>
                <clr-stack-content>{{config.configStatus}}</clr-stack-content>
            </clr-stack-block>
            <clr-stack-block [clrStackViewLevel]="2" [clrStackViewSetsize]="3" [clrStackViewPosinset]="1" *ngFor="let node of config.nodes; index as i">
                <clr-stack-label >Host №{{i+1}}</clr-stack-label>
                <clr-stack-content> </clr-stack-content>
                <clr-stack-block [clrStackViewLevel]="3" [clrStackViewSetsize]="3" [clrStackViewPosinset]="1">
                    <clr-stack-label>Host</clr-stack-label>
                    <clr-stack-content>{{node.host}}</clr-stack-content>
                </clr-stack-block>
                <clr-stack-block [clrStackViewLevel]="3" [clrStackViewSetsize]="3" [clrStackViewPosinset]="2">
                    <clr-stack-label>Status</clr-stack-label>
                    <clr-stack-content>{{node.status}}</clr-stack-content>
                </clr-stack-block>
                <clr-stack-block [clrStackViewLevel]="3" [clrStackViewSetsize]="3" [clrStackViewPosinset]="3">
                    <clr-stack-label>Message</clr-stack-label>
                    <clr-stack-content>{{node.message}}</clr-stack-content>
                </clr-stack-block>
            </clr-stack-block>
            
    </clr-stack-block>

</clr-stack-view>

<clr-modal [(clrModalOpen)]="editModal">
    <h3 class="modal-title">Edit mode</h3>
    <div class="modal-body">
        <clr-stack-view>
            <clr-stack-block [clrStackViewLevel]="1" [clrStackViewSetsize]="4" [clrStackViewPosinset]="1" *ngFor="let config of configs">
        
                    <clr-stack-label *ngIf="config.installMethod == 'Replace'">{{config.configName}}</clr-stack-label>
                    <clr-stack-content><b>installMethod:</b> {{config.installMethod}} <b>Date:</b> {{config.date | date: 'medium'}} </clr-stack-content>
                    
                    <clr-stack-block [clrStackViewLevel]="2" [clrStackViewSetsize]="3" [clrStackViewPosinset]="1">
                        <clr-stack-label>Name</clr-stack-label>
                        <input type="text" [(ngModel)]="config.configName" class="clr-input"/>
                    </clr-stack-block>
                    <clr-stack-block [clrStackViewLevel]="2" [clrStackViewSetsize]="3" [clrStackViewPosinset]="2">
                        <clr-stack-label>Date</clr-stack-label>
                        <input type="text" [(ngModel)]="config.date" class="clr-input"/>
                    </clr-stack-block>
                    <clr-stack-block [clrStackViewLevel]="2" [clrStackViewSetsize]="3" [clrStackViewPosinset]="3">
                        <clr-stack-label>Config status</clr-stack-label>
                        <input type="text" [(ngModel)]="config.configStatus" class="clr-input"/>
                    </clr-stack-block>
                    <clr-stack-block [clrStackViewLevel]="2" [clrStackViewSetsize]="3" [clrStackViewPosinset]="1" *ngFor="let node of config.nodes; index as i">
                        <clr-stack-label >Host №{{i+1}}</clr-stack-label>
                        <clr-stack-content> </clr-stack-content>
                        <clr-stack-block [clrStackViewLevel]="3" [clrStackViewSetsize]="3" [clrStackViewPosinset]="1">
                            <clr-stack-label>Host</clr-stack-label>
                            <input type="text" [(ngModel)]="node.host" class="clr-input"/>
                        </clr-stack-block>
                        <clr-stack-block [clrStackViewLevel]="3" [clrStackViewSetsize]="3" [clrStackViewPosinset]="2">
                            <clr-stack-label>Status</clr-stack-label>
                            <input type="text" [(ngModel)]="node.status" class="clr-input"/>
                        </clr-stack-block>
                        <clr-stack-block [clrStackViewLevel]="3" [clrStackViewSetsize]="3" [clrStackViewPosinset]="3">
                            <clr-stack-label>Message</clr-stack-label>
                            <input type="text" [(ngModel)]="node.message" class="clr-input"/>
                        </clr-stack-block>
                    </clr-stack-block>
            </clr-stack-block>
        </clr-stack-view>
    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-primary" (click)="editModal = false">Done</button>
    </div>
</clr-modal>